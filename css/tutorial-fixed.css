/**
 * AR Menü Eğitim Modalı İyileştirilmiş Stil Düzeltmeleri
 * Mobil ve masaüstü cihazlarda tutarlı görünüm sağlar
 */

/* Modal animasyonları - Daha düzgün geçişler */
@keyframes modalEnterFixed {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes modalLeaveFixed {
    from {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    to {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
    }
}

/* Modal geçiş sınıfları */
.modal-enter {
    animation: modalEnterFixed 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards !important;
}

.modal-leave {
    animation: modalLeaveFixed 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards !important;
}

/* Z-index düzeltmeleri */
#instructionsModal {
    z-index: 1000 !important; /* En üstte olmasını sağlar */
}

/* Kaydırmayı engelleme düzeltmeleri */
body.modal-open {
    overflow: hidden !important;
    position: fixed;
    width: 100%;
    height: 100%;
}

/* Modal içeriği kaydırma düzeltmesi */
.modal-content {
    overflow-y: auto;
    overscroll-behavior: contain;
    max-height: 85vh !important;
}

/* Tutorial slaytların geçiş problemi düzeltmesi */
.tutorial-slide {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: auto !important;  /* auto yerine 100% */
    min-height: 300px !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateX(40px) !important;
    transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s !important;
    transition-property: opacity, transform, visibility !important;
}

.tutorial-slide.active {
    position: relative !important;
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateX(0) !important;
    z-index: 2 !important;
}

/* Tutorial slayt alanı düzeltmesi */
.tutorial-slides {
    position: relative !important;
    overflow: visible !important;
    min-height: 400px !important;
}

/* Buton alanı düzeltmesi */
.tutorial-navigation {
    position: relative !important;
    bottom: 0 !important;
    z-index: 5 !important;
    border-top: 1px solid rgba(0, 0, 0, 0.1) !important;
}

/* Butonlara daha güçlü stiller */
.tutorial-btn {
    position: relative !important;
    z-index: 6 !important;
    cursor: pointer !important;
}

/* İleri tuşu - dokunma alanı genişletmesi */
#tutorialNextBtn {
    padding: 12px 24px !important;
    min-width: 120px !important;
}

/* Garantili kapatma butonu */
#closeModalBtn {
    position: relative !important;
    z-index: 10 !important;
    width: 40px !important;
    height: 40px !important;
    padding: 8px !important;
    cursor: pointer !important;
    background-color: rgba(255, 255, 255, 0.2) !important;
}

#closeModalBtn:hover {
    background-color: rgba(0, 0, 0, 0.1) !important;
}

/* Mobil cihazlarda dokunma alanını genişletme */
@media (max-width: 768px) {
    .tutorial-btn, #tutorialSkipBtn {
        padding: 14px 20px !important;
        min-height: 48px !important; /* Apple HIG için 44px minimumu aşıyor */
    }
    
    .step-dot {
        width: 12px !important;
        height: 12px !important;
        margin: 0 6px !important;
    }
    
    #closeModalBtn {
        width: 44px !important;
        height: 44px !important;
    }
}

/* iOS Safari ve diğer mobil tarayıcılarda içerik kaydırmayı düzeltme */
.modal-body {
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior-y: contain !important;
}

/* iOS ve Touch tarayıcılarda buton dokunma alanını iyileştirme */
.tutorial-btn, #closeModalBtn, .step-dot {
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
}

/* Aktif adım göstergesinin daha belirgin olması */
.step-dot.active {
    transform: scale(1.4) !important;
    box-shadow: 0 0 0 3px rgba(106, 90, 224, 0.3) !important;
}

/* Yüksek kontrast için erişilebilirlik iyileştirmeleri */
.step-info h3 {
    color: var(--primary-dark, #4A3DBF) !important;
    font-weight: 700 !important;
}

.pro-tip {
    border: 1px solid rgba(255, 203, 69, 0.3) !important;
}

/* Mobil cihazlarda modal içeriğini optimize etme */
@media (max-height: 600px) {
    .step-icon {
        width: 60px !important;
        height: 60px !important;
    }
    
    .step-illustration img {
        max-height: 160px !important;
    }
}

/* Safari'de animasyon ve transform sorunlarını düzeltme */
.tutorial-slide {
    -webkit-backface-visibility: hidden !important;
    backface-visibility: hidden !important;
    -webkit-transform: translateZ(0) scale(1.0, 1.0) !important;
    transform: translateZ(0) scale(1.0, 1.0) !important;
}
